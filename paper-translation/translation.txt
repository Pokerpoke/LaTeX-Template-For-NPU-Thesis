开源软件定义无线电：一个基于GNU Radio及其应用的调查

第一章
简介
芯片计算能力的指数增长促使无线电工程师不断重新思考无线电收发器的设计，过去的几十年见证了无线电硬件不断提升。传统的模拟硬件收音机架构由超外差收发器组成，其中来自天线的信号转换为中频（IF），进行滤波，转换为基带信号，最后解调。这种简单的设计一直是电视，FM收音机和第一代手机成功传播的关键因素。80年代后期，既快速又便宜的数字信号处理器（DSP）的广泛使用引领了数字收发器的发展。数字电台收发器分为两部分：无线电前端（FE），其目的是限制窄带频率下变频，接着是模拟-数字转换（ADC）和无线电后端（BE），负责剩余信号处理步骤，例如（de）调制，滤波在数字领域的信道（de）编码。这个架构能够成功主要是因为专用集成电路（ASIC）芯片组的低成本，但是在灵活性方面受到严格的限制。实际上ASIC是定制用于特定用途的，而不是用于通用目的，虽然FE和BE都可以扩展（例如通过添加新的窄带或基带卡），但是快速开发的协议不允许投资缓冲。

通过软件更新来升级无线电收发器的需要在过去几年里，投资主导了所谓的软件定义无线电（SDR）架构。 在这些系统中，执行信号处理（或至少管理）通过软件通过使用现场可编程门阵列（FPGA），通用处理器（GPP）或任何其他可编程器件。通过使用SDR，工程师尽量将软件域移动到尽可能靠近天线的位置，以保证更高的灵活性。决定每个特定实现的性能要求什么应该在软件中实现，什么应该在硬件上实现。

软件定义无线电
我们将SDR定义为使用数字无线电信号上使用软件技术的无线电平台。 因此，在接收链的某一阶段信号被数字化并传递给软件。除了灵活性，SDR的主要目的是“将硬件问题变成软件问题”，使无线电工程师在更易于访问的领域工作。更一般地说，SDR是分开的分为两个子系统：硬件定义子系统和软件定义子系统。硬件和软件子系统之间的区别是不确定的。理想情况下，SDR可以由天线，ADC和软件定义的子系统组成。实现这样的设备将需要满足以下三个条件：
- 天线能够适应并工作于所有的频率
- ADC和DAC的采样率需要大于信号频率的两倍
- 软件子系统有足够处理所有无线电信号的能力

实际上，ADC和DAC的速度不够快，无法处理大部分的数据频谱，天线只能用于特定频段。结果是，理想的SDR仅用于特别简单的技术（例如AM广播）。在典型的SDR中，硬件定义的子系统由宽带无线电组成，FE在数字化之前处理一部分频谱并将其转移到IF。该软件定义的子系统接收数字宽带信号，将其发送到一组数字下变频器，以隔离所需的载波，并进行解调。要注意与收音机的根本区别，FE定义为普通数字收发器和SDR中使用的收发器。前者是窄带，它处理一小部分频谱，并将其转移到IF或基带。相比之下，后者通常是宽带的，它对于更宽的频谱执行相同的操作，以适应不同的技术，然后在软件中进行进一步的滤波。SDR的设计目标是使FE尽可能通用，并作用于软件子系统以实施新功能。软件定义子系统也可以由可编程器件组合而成，它们之间的连接速度足以传输DSP数据。市场上有几种SDR解决方案可用，在本报告中，我们将专注于灵活的和完全开源的设计的GNU Radio平台。

本报告的其余部分组织如下：第二章分析Ettas Research的SDR解决方案，即Universal Software Radio Peripheral（USRP）指出其主要限制。在第三章中，我们提供一个简短的GNUradio框架的概述，我们将进一步分析GNUradio在一些广泛使用的无线技术的平台的适用性。最后，在第五章我们将得出主要结论。

第二章
通用软件无线电外设（USRP）

通用软件无线电外设（USRP）是由Ettus Research LLC开发的设备，它将通用计算机转变为灵活的SDR平台。USRP的核心是具有四个高速ADC，DAC和Altera Cyclone EP1C12 FPGA的母板。ADC/DAC连接到无线电FE（称为子板），而FPGA连接到USB2接口芯片来连接通用计算机。USRP背后的主要原理是数字无线电任务分为内部FPGA和外部主机CPU。高速通用处理，像上下转换、抽取、插值都在FPGA中执行，而波形处理，例如调制和解调，将在主机CPU上处理。
除了数据手册和CAD文件外，最完整的关于USRP的信息来源可能是“The USRP under 1.5XMagnifying Lens!”文件，给出了USRP的简短介绍，并收集从各种互联网论坛收集的常见问题。为了理解USRP的局限性，我们将在下面的小节中分别研究每个组件。

2.1 母板
图2.2描述了USRP主板的布局。USRP是在使用免费和开源CAD软件的开放规范项目下设计的，诸如原理图，CAD文件和所有其他规范的详细信息都能够下载。gEDA和PCB已被用于原理图和电路板布局。FPGA设计也是开放的，因此FPGA固件可以轻松修改。仔细看看图片，使用了四个白色插槽用于连接子板。两个插槽用于传输（TXA和TXB），两个用于接收（RXA和RXB）。信号通过子板ADC / DAC（白色插槽之间的黑色芯片）发送或者接收。在主板的中心是Altera Cylone FPGA，其中的一部分是DSP执行。 在FPGA下几厘米处可以看到USB接口芯片，用于与主机cpu的通信。以下小节中将给出每个芯片的更多细节。

2.2 ADCs/DACs
USRP包含四个采样率为64 Msamples/s的12位ADC。，因此，带宽数字化高达32 MHz的信号（参见尼奎斯特定理）。换句话说，为了数字化超过32MHz的数字信号而不引入混叠，无线电FE需要先下变频至ADC。该板还在ADC之前提供了可编程增益放大器（PGA），以便在弱信号也在可用的输入范围内。在发送侧有四个采样率为128 Msamples/s的14位DAC。在这种情况下，尼奎斯特频率为64MHz，为了更好的性能应用了过采样。DAC之后也有PGA，提供高达20dB的增益。

2.3 FPGA
FPGA在USRP设计中起着核心作用。USRP FPGA使用Verilog硬件描述语言，使用Altera公司的Quartus II网络版编译。这个编译器是免费的，因此可以定制Verilog代码编译并上传到FPGA固件，标准配置已经适用于各种应用。另外，针对特殊应用的Verilog代码可以在GNUradio社区网站中找到。该FPGA连接到ADC，DAC和USB控制器。在接收端，模拟信号由ADC转换为12位采样，然后传递给FPGA进行进一步处理。这里，复用器路由信号适用于将信号转换为基带的Direct Down Converter并按照用户指定的因子进行抽取。然后进行数据交织（如果有多个通道），并通过16位采样到USB2控制器传输到主机cpu。USB连接具有标称带宽32MB / s半双工，即带宽需要区分下行和上行链路。USB带宽用USRP设计软件无线电时最严格的限制之一。 根据尼奎斯特定理，16位采样（2字节）产生32 MBytes / 2字节= 16 Msamples每秒，所以它提供最大的信号带宽为8 MHz。这就需要在FPGA之前完成数据传输到主机cpu之前完成一些DSP的操作。